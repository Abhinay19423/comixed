<p-blockUI [blocked]="single_comic_scraping.busy">
  <p-progressBar mode='indeterminate'
                 [style]='{"height": "6px"}'></p-progressBar>
</p-blockUI>
<div *ngIf="single_comic_scraping && !single_comic_scraping.volumes.length"
     class="ui-g">
  <div class="ui-g-2 ui-sm-2">
    <label for="api_key">
      <b>{{'comic-details-editor.label.comicvine-api-key'|translate}}</b>
    </label>
  </div>
  <div class="ui-g-10 ui-sm-6">
    <p-inplace closable="closable">
      <span pInplaceDisplay
            pTooltip="{{'comic-details-editor.tooltip.comicvine-api-key'|translate}}">{{api_key||('comic-details-editor.text.comicvine-api-key-placeholder'|translate)}}</span>
      <span pInplaceContent>
        <input id="api_key"
               type="text"
               [(ngModel)]="api_key"
               pInputText>
        <button pButton
                type="button"
                icon="pi pi-check"
                [disabled]="!is_api_key_valid()"
                (click)="save_api_key()"></button>
      </span>
    </p-inplace>
  </div>
  <div class="ui-g-2 ui-sm-2">
    <label for="series">
      <b>{{'comic-details-editor.label.series'|translate}}</b>
    </label>
  </div>
  <div class="ui-g-10 ui-sm-6">
    <input id="series"
           type="text"
           [(ngModel)]="series"
           pInputText>
  </div>
  <div class="ui-g-2 ui-sm-6">
    <label for="volume">
      <b>{{'comic-details-editor.label.volume'|translate}}</b>
    </label>
  </div>
  <div class="ui-g-10 ui-sm-6">
    <input id="volume"
           type="text"
           [(ngModel)]="volume"
           pInputText>
  </div>
  <div class="ui-g-2 ui-sm-6">
    <label for="issue_number">
      <b>{{'comic-details-editor.label.issue-number'|translate}}</b>
    </label>
  </div>
  <div class="ui-g-10 ui-sm-6">
    <input id="issue_number"
           type="text"
           [(ngModel)]="issue_number"
           pInputText>
  </div>
  <div class="ui-g-12 ui-sm-12">
    <button pButton
            type="button"
            pInplaceContent
            label="{{'button.save'|translate}}"
            icon="fa fa-save"
            (click)="save_changes()"></button>
    <p-splitButton label="Fetch"
                   icon="fa fa-search"
                   [model]="fetch_options"
                   [disabled]="!is_ready_to_fetch()"></p-splitButton>
    <button pButton
            type="button"
            label="{{'button.reset'|translate}}"
            icon="fa fa-undo"
            (click)="reset_changes()"></button>
  </div>
</div>
<div *ngIf="single_comic_scraping && single_comic_scraping.volumes?.length"
     class="ui-g">
  <div class="ui-g-12">
    <app-volume-list [api_key]="single_comic_scraping.api_key"
                     [comic]="single_comic_scraping.comic"
                     [volumes]="single_comic_scraping.volumes"
                     [current_volume]="single_comic_scraping.current_volume"
                     [current_issue]="single_comic_scraping.current_issue"
                     (selectVolume)="select_volume($event)"
                     (selectIssue)="select_issue()"
                     (cancelSelection)="cancel_selection()"></app-volume-list>
  </div>
</div>
